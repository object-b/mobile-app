<template>
    <div class="page" data-name="object">
        <div class="navbar">
            <div class="navbar-inner sliding">
                <div class="left">
                    <a href="#" class="link back">
                        <i class="icon icon-back"></i>
                        <span class="ios-only">Назад</span>
                    </a>
                </div>
                <div class="title">Объект</div>
            </div>
        </div>
        <div class="page-content">
            {{#if object}}
                <div class="block">
                    <div data-pagination='{"el": ".swiper-pagination"}' data-space-between="10" data-slides-per-view="2" class="swiper-container swiper-init demo-swiper">
                        <div class="swiper-pagination"></div>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <img src="https://via.placeholder.com/150C/" width="200">
                            </div>
                            <div class="swiper-slide">
                                <img src="https://via.placeholder.com/750C/" width="200">
                            </div>
                            <div class="swiper-slide">
                                <img src="https://via.placeholder.com/350C/" width="200">
                            </div>
                        </div>
                    </div>
                </div>
            {{/if}}
        </div>
    </div>
</template>
<script>
    export default {
        data: function () {
            return {
                // empty initial data
                object: null,
                // object photos here
                photos: [
                    'https://cdn.framework7.io/placeholder/sports-1024x1024-1.jpg',
                ],
            }
        },
        // Page Events
        on: {
            pageInit: function () {
                var self = this;
                var app = self.$app;
                var $$ = self.$$;
                var id = self.$route.params.objectId;

                app.preloader.show();

                // request data on page init
                // app.request.get(this.$root.mainApiUrl + '/objects/' + id, (object) => {
                    // update component state with new state
                    setTimeout(function () {
                        // Test
                        var object = {
                            status: 'Ожидает уборки',
                            image: 'https://cdn.framework7.io/placeholder/people-160x160-1.jpg',
                            author: 'Роман Власенко',
                            text: 'Бытовые отходы, стекло, пластик, продукты',
                            size: 'Машина',
                            humanDate: '7 сентября 2019',
                        };

                        app.preloader.hide();

                        self.$setState({
                            object: object,
                        });
                    }, 500);
                // });

                var myPhotoBrowserStandalone = app.photoBrowser.create({
                    photos: this.photos,
                    type: 'popup'
                });

                // Open photo browser on click
                $$(document).on('click', '.swiper-slide', function() {
                    myPhotoBrowserStandalone.open();
                });
            },
        }
    }
</script>